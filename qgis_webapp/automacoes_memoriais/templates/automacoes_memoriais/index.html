{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="csrf-token" content="{{ csrf_token }}">
  <title>Agente QGIS | Automa√ß√£o de Memoriais</title>
  <link rel="stylesheet" href="{% static 'automacoes_memoriais/css/style.css' %}">
</head>

<body onpageshow="if (event.persisted || performance.getEntriesByType('navigation')[0]?.type === 'back_forward') location.reload();">

  <div class="wrap">
    <div class="card">
      <h1>Gerador de Memoriais</h1>
      <p class="subtitle">Envie o arquivo DXF para gerar os memoriais descritivos automaticamente.</p>

      <!-- √Årea de Upload -->
      <div class="upload-area">
        <label class="uploader" id="dropzone-dxf">
          <input id="fileInputDXF" type="file" accept=".dxf" />
          <div>
            <strong>Arquivo DXF</strong>
            <div class="hint">Solte aqui ou clique para selecionar</div>
          </div>
        </label>
      </div>

      <!-- √Årea de Progresso -->
      <div class="progress-area" id="progressArea">
        <div class="progress-card">

          <div class="badge">
            <span id="stageChip">Etapa 1 de 17</span>
          </div>

          <div style="display:flex; align-items:center; justify-content:space-between; margin:6px 0 8px;">
            <div id="stageTitle" style="font-size:18px; font-weight:700;">Preparando ambiente‚Ä¶</div>
            <div class="ticker" id="percentLabel">0%</div>
          </div>

          <div class="bar"><div id="barFill"></div></div>

          <div class="mini" id="detailLine">Aguardando in√≠cio‚Ä¶</div>

          <div class="steps" id="stepsList" style="margin-top:14px;"></div>

          <!-- Bot√µes -->
          <div class="footer">
            <button class="btn primary start-btn" id="startBtn" type="button">‚ñ∂Ô∏è Iniciar</button>

            <button class="btn download" id="downloadMemoriais" style="display:none;" type="button">
              ‚¨áÔ∏è Baixar Memoriais
            </button>

            <button class="btn ghost" id="resetBtn" style="display:none;" type="button">
              üîÑ Reiniciar
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast">Processo iniciado!</div>

  <script src="{% static 'automacoes_memoriais/js/main.js' %}"></script>

</body>
</html>
